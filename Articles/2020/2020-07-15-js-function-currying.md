

| Property     | Content                                                      |
| ------------ | ------------------------------------------------------------ |
| Id           | 54432a21-88df-4a83-a02f-762296b72609                         |
| Name         | 2020-07-15-js-function-currying.md                           |
| ArticleLink  | https://blog.spiritling.cn/articles/54432a21-88df-4a83-a02f-762296b72609 |
| Github Issue | https://github.com/SpiritLing/Comments/issues/14             |
| Gitee Issue  | https://gitee.com/SpiritLing/Comments/issues/I54NUX          |

# js å‡½æ•°æŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰

> åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼ŒæŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰ï¼Œåˆè¯‘ä¸ºå¡ç‘åŒ–æˆ–åŠ é‡ŒåŒ–ï¼Œæ˜¯æŠŠæ¥å—å¤šä¸ªå‚æ•°çš„å‡½æ•°å˜æ¢æˆæ¥å—ä¸€ä¸ªå•ä¸€å‚æ•°ï¼ˆæœ€åˆå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼‰çš„å‡½æ•°ï¼Œå¹¶ä¸”è¿”å›æ¥å—ä½™ä¸‹çš„å‚æ•°è€Œä¸”è¿”å›ç»“æœçš„æ–°å‡½æ•°çš„æŠ€æœ¯ã€‚

## ä»ä¸€é“é¢è¯•é¢˜è°ˆè°ˆå‡½æ•°æŸ¯é‡ŒåŒ–ä»ä¸€é“é¢è¯•é¢˜è°ˆè°ˆå‡½æ•°æŸ¯é‡ŒåŒ–

> é¢˜ç›®ï¼šä½¿ç”¨ js å®ç° add(1)(2)(3)(4) è¿”å› 10

å‡½æ•°æŸ¯é‡ŒåŒ–è¦æ±‚å¤šä¸ªå‚æ•°è½¬ä¸ºå•ä¸€å‚æ•°ï¼Œæ‰€ä»¥ç›¸å½“äº

```js
function add() {
    return Array.from(arguments);
}
// è°ƒç”¨ï¼šadd(1, 2, 3, 4) => [1, 2, 3, 4]
// è½¬æ¢ä¸ºä¸‹é¢å½¢å¼
function addCurrying() {
    // do something
}
// è°ƒç”¨ï¼šaddCurrying(1)(2)(3)(4) => [1, 2, 3, 4]
```

## é—­åŒ…æ‹¿å‚æ•°

é—­åŒ…ï¼šå®šä¹‰åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨çš„å‡½æ•°ï¼Œé™æ€ä¿å­˜æ‰€æœ‰äº†çˆ¶çº§ä½œç”¨åŸŸçš„å†…éƒ¨å‡½æ•°ã€‚æ‰€ä»¥æ¯æ¬¡çš„å€¼å¯ä»¥ä¿å­˜ä½ï¼Œåˆ°äº†æœ€åå¯ä»¥å…¨éƒ¨è®¿é—®åˆ°

æ‰€ä»¥ï¼Œæˆ‘ä»¬å…ˆæ¥ä¸€ä¸ªé—­åŒ…æ¥æ‹¿å–åˆ°æ‰€æœ‰å‚æ•°

```js
var add = function (value) {
    var result = [];
    result.push(value);
    // _add å‡½æ•°å°±æ˜¯ä¸€ä¸ªé—­åŒ…ï¼Œæ‹¿å–åˆ°çˆ¶çº§ä½œç”¨åŸŸçš„å€¼ï¼Œå› ä¸º_addå‡½æ•°å·²è·å–åˆ°çˆ¶çº§æ•°æ®ï¼Œæ‰€ä»¥çˆ¶çº§ä¸€ç›´å­˜åœ¨ï¼Œæ²¡æœ‰é‡Šæ”¾
    var _add = function (value2) {
        result.push(value);
        return _add;
    };
    // æ­¤æ–¹æ³•è°ƒç”¨è¿”å›æ•°ç»„
    _add.getResult = function () {
        return result;
    };
    return _add;
};
```

è¿™æ ·é€šè¿‡ä¸Šé¢å‡½æ•°å°±å¯ä»¥å®ç°åŸºæœ¬çš„æŸ¯é‡ŒåŒ–è¦æ±‚

æ‰§è¡Œï¼š

```js
// addCurrying(1)(2)(3)(4).getResult => [1, 2, 3, 4]
// addCurrying(1)(2)(3)(4)
// =>
/*
Æ’ (value2) {
    result.push(value);
    return _add;
}
*/
```

## é‡å†™å†…ç½®å‡½æ•°è¿”å›ç»“æœ

ä¸Šé¢çš„ä»£ç è™½ç„¶å·²ç»è·å–åˆ°æ‰€æœ‰çš„å‚æ•°ï¼Œä½†æ˜¯è¿”å›ç»“æœå¹¶æ²¡æœ‰è‡ªåŠ¨è¿”å›ï¼Œè€Œæ˜¯éœ€è¦è°ƒç”¨å‡½æ•°æ‰è¿”å›ã€‚

å¹¶ä¸”ç”±äºä¸çŸ¥é“å‚æ•°é•¿åº¦ï¼Œä¹Ÿå°±æ— æ³•é€šè¿‡å‚æ•°æ•°ç»„é•¿åº¦æ¥åŠæ—¶è¿”å›ç»“æœã€‚

é‚£ä¹ˆæœ‰ä»€ä¹ˆæ–¹æ³•å¯ä»¥è§£å†³å‘¢ï¼ŸğŸ¤”

å½“ç„¶æœ‰äº†ï¼Œåœ¨ js ä¸­å‡½æ•°æ˜¯æœ‰åŸå‹é“¾çš„ï¼Œæ‰€ä»¥æ¯ä¸ªå‡½æ•°éƒ½ç»§æ‰¿äº†åŸºæœ¬çš„ä¸€äº›æ–¹æ³•ã€‚

å½“ä½ å®šä¹‰ä¸€ä¸ªå‡½æ•°åï¼Œä½ å¦‚æœæ‰“å°æ—¶åªè¾“å…¥å‡½æ•°åï¼Œå¹¶ä¸æ‰§è¡Œï¼Œåˆ™å‡½æ•°å†…éƒ¨ä¿¡æ¯å°±è¢«æ‰“å°å‡ºæ¥ã€‚

é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é‡å†™è¿™ä¸ªæ–¹æ³•ï¼Œæ¥åœ¨ç»“æŸåæ‰§è¡Œã€‚

å‡½æ•°çš„ `toString` æ–¹æ³•å¯ä»¥æ‰“å°å‡½æ•°ä½“ï¼Œæ‰€ä»¥æˆ‘ä»¬æ”¹é€ ä¸‹ï¼Œè®© `toString` è¿”å›ç»“æœ

```js
//é¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå…¥å£å‡½æ•°è¿›è¡ŒåŸºæœ¬å¤„ç†
var add = function (value) {
    //å®šä¹‰ä¸€ä¸ªä¿å­˜æ‰€æœ‰ä¼ å…¥çš„å‚æ•°çš„æ•°ç»„
    var result = [];
    // å°†ç¬¬ä¸€ä¸ªä¼ å…¥çš„å‚æ•°æ”¾ç½®è¿›å»
    result.push(value);
    // å®šä¹‰å‡½æ•° _add å¼•ç”¨resultå˜é‡ï¼Œä½¿å…¶ä¿æŒä¸è¢«é”€æ¯æ‰
    var _add = function (subValue) {
        // å°†å‚æ•°pushè¿›å…¥resultä¸­å»
        result.push(subValue);
        // è¿”å›å‡½æ•° _add è¿›è¡Œä¸‹æ¬¡ä¸€è°ƒç”¨
        return _add;
    };
    // å°†åŸç”Ÿè‡ªå¸¦çš„toString è¿›è¡Œé‡å†™
    _add.toString = function () {
        return result;
    };
    // è¿”å› _add å‡½æ•°è¿›è¡Œä¸‹æ¬¡è°ƒç”¨
    return _add;
};
```

æ‰§è¡Œç»“æœ

-   `add(1)` => `[1]`
-   `add(1)(2)` => `[1,2]`
-   `add(1)(2)(3)` => `[1,2,3]`

![å‡½æ•°æ‰§è¡Œæµç¨‹å›¾](https://archive.static.spiritling.net/images/screenshot_1535697196480.png)



## ç»“æŸ

é€šè¿‡ä¸Šé¢çš„ç ”ç©¶ï¼Œè§£å†³ä¸€ä¸ªå‡½æ•°æŸ¯é‡ŒåŒ–é—®é¢˜ã€‚